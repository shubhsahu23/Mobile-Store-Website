{% extends 'main/base.html' %}

{% block title %}All Collections - MobileStore{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <div>
            <h1 class="page-title">Our Collections</h1>
            <p class="page-subtitle">Browse our complete range of premium smartphones</p>
        </div>
    </div>

    {% if products %}
    <div class="product-grid" style="grid-template-columns: repeat(2, 1fr); gap: 2rem;">
        {% for p in products %}
        <div class="card product-card">
            <div class="product-media" style="height: 260px; padding: 1.5rem;">
                {% if p.image %}
                <img src="{{ p.image.url }}" alt="{{ p.name }}">
                {% else %}
                <div class="text-muted"><i class="fas fa-image fa-3x"></i><br><span
                        style="font-size: 0.9rem; margin-top: 0.5rem; display: block;">No Image</span></div>
                {% endif %}
            </div>
            <div class="product-body" style="padding: 1.75rem;">
                <div style="margin-bottom: 1.5rem;">
                    <span class="product-brand" style="letter-spacing: 0.1em;">{{ p.brand }}</span>
                    <h3 class="product-title" style="font-size: 1.25rem;">{{ p.name }}</h3>
                </div>

                <div class="product-footer">
                    <div>
                        <span class="text-muted"
                            style="font-size: 0.8rem; display: block; margin-bottom: 0.25rem;">Price</span>
                        <div class="product-price" style="font-size: 1.5rem;">â‚¹{{ p.price }}</div>
                    </div>
                    {% if user.is_authenticated %}
                    <a href="{% url 'add_to_cart' p.id %}" class="btn btn-primary" style="gap: 0.5rem;">
                        <i class="fas fa-shopping-cart"></i> Add to Cart
                    </a>
                    {% else %}
                    <a href="{% url 'user_login' %}?next={% url 'place_order' p.id %}" class="btn btn-primary" style="gap: 0.5rem;">
                        <i class="fas fa-shopping-bag"></i> Buy Now
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="card empty-state" style="background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);">
        <i class="fas fa-box-open fa-4x text-muted mb-4"></i>
        <h3 style="margin-bottom: 0.5rem;">No Products Found</h3>
        <p class="text-muted">Check back later for new arrivals.</p>
    </div>
    {% endif %}
</div>
{% endblock %}